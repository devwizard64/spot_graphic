#include <ultra64.h>

.set noreorder
.set noat

/* 0x80328080 */
.globl __osViSwapContext
__osViSwapContext:
/*0x80328080*/  addiu   $sp, $sp, -0x0048
/*0x80328084*/  sw      $s1, 0x001C($sp)
/*0x80328088*/  sw      $ra, 0x0024($sp)
/*0x8032808C*/  sw      $s2, 0x0020($sp)
/*0x80328090*/  sw      $s0, 0x0018($sp)
/*0x80328094*/  sw      $0, 0x0030($sp)
/*0x80328098*/  lui     $s1, %hi(__osViNext)
/*0x8032809C*/  lui     $t6, %hi(0xA4400010)
/*0x803280A0*/  lw      $s1, %lo(__osViNext)($s1)
/*0x803280A4*/  lw      $t7, %lo(0xA4400010)($t6)
/*0x803280A8*/  lw      $s0, 0x0008($s1)
/*0x803280AC*/  andi    $t8, $t7, 0x0001
/*0x803280B0*/  sw      $t8, 0x0030($sp)
/*0x803280B4*/  jal     osVirtualToPhysical
/*0x803280B8*/  lw      $a0, 0x0004($s1)
/*0x803280BC*/  lw      $t9, 0x0030($sp)
/*0x803280C0*/  move    $s2, $v0
/*0x803280C4*/  sll     $t0, $t9, 2
/*0x803280C8*/  addu    $t0, $t0, $t9
/*0x803280CC*/  sll     $t0, $t0, 2
/*0x803280D0*/  addu    $t1, $s0, $t0
/*0x803280D4*/  lw      $t2, 0x0028($t1)
/*0x803280D8*/  addu    $t3, $t2, $s2
/*0x803280DC*/  sw      $t3, 0x003C($sp)
/*0x803280E0*/  lhu     $t4, 0x0000($s1)
/*0x803280E4*/  andi    $t5, $t4, 0x0002
/*0x803280E8*/  beqz    $t5, .L8032810C
/*0x803280EC*/  nop
/*0x803280F0*/  lw      $t7, 0x0020($s0)
/*0x803280F4*/  lw      $t6, 0x0020($s1)
/*0x803280F8*/  li      $at, -0x1000
/*0x803280FC*/  and     $t8, $t7, $at
/*0x80328100*/  or      $t9, $t6, $t8
/*0x80328104*/  b       .L80328114
/*0x80328108*/  sw      $t9, 0x0020($s1)
.L8032810C:
/*0x8032810C*/  lw      $t0, 0x0020($s0)
/*0x80328110*/  sw      $t0, 0x0020($s1)
.L80328114:
/*0x80328114*/  lhu     $t1, 0x0000($s1)
/*0x80328118*/  andi    $t2, $t1, 0x0004
/*0x8032811C*/  beqz    $t2, .L80328224
/*0x80328120*/  nop
/*0x80328124*/  lw      $t3, 0x0030($sp)
/*0x80328128*/  sll     $t4, $t3, 2
/*0x8032812C*/  addu    $t4, $t4, $t3
/*0x80328130*/  sll     $t4, $t4, 2
/*0x80328134*/  addu    $t5, $s0, $t4
/*0x80328138*/  lw      $t7, 0x002C($t5)
/*0x8032813C*/  andi    $t6, $t7, 0x0FFF
/*0x80328140*/  mtc1    $t6, $f6
/*0x80328144*/  sw      $t6, 0x0034($sp)
/*0x80328148*/  lwc1    $f4, 0x0024($s1)
/*0x8032814C*/  bgez    $t6, .L80328164
/*0x80328150*/  cvt.s.w $f8, $f6
/*0x80328154*/  li      $at, 0x4F800000
/*0x80328158*/  mtc1    $at, $f10
/*0x8032815C*/  nop
/*0x80328160*/  add.s   $f8, $f8, $f10
.L80328164:
/*0x80328164*/  mul.s   $f16, $f4, $f8
/*0x80328168*/  li      $t9, 0x0001
/*0x8032816C*/  cfc1    $t8, $31
/*0x80328170*/  ctc1    $t9, $31
/*0x80328174*/  nop
/*0x80328178*/  cvt.w.s $f18, $f16
/*0x8032817C*/  cfc1    $t9, $31
/*0x80328180*/  nop
/*0x80328184*/  andi    $at, $t9, 0x0004
/*0x80328188*/  andi    $t9, $t9, 0x0078
/*0x8032818C*/  beqz    $t9, .L803281DC
/*0x80328190*/  li      $at, 0x4F000000
/*0x80328194*/  mtc1    $at, $f18
/*0x80328198*/  li      $t9, 0x0001
/*0x8032819C*/  sub.s   $f18, $f16, $f18
/*0x803281A0*/  ctc1    $t9, $31
/*0x803281A4*/  nop
/*0x803281A8*/  cvt.w.s $f18, $f18
/*0x803281AC*/  cfc1    $t9, $31
/*0x803281B0*/  nop
/*0x803281B4*/  andi    $at, $t9, 0x0004
/*0x803281B8*/  andi    $t9, $t9, 0x0078
/*0x803281BC*/  bnez    $t9, .L803281D4
/*0x803281C0*/  nop
/*0x803281C4*/  mfc1    $t9, $f18
/*0x803281C8*/  li      $at, 0x80000000
/*0x803281CC*/  b       .L803281EC
/*0x803281D0*/  or      $t9, $t9, $at
.L803281D4:
/*0x803281D4*/  b       .L803281EC
/*0x803281D8*/  li      $t9, -0x0001
.L803281DC:
/*0x803281DC*/  mfc1    $t9, $f18
/*0x803281E0*/  nop
/*0x803281E4*/  bltz    $t9, .L803281D4
/*0x803281E8*/  nop
.L803281EC:
/*0x803281EC*/  sw      $t9, 0x002C($s1)
/*0x803281F0*/  lw      $t1, 0x0030($sp)
/*0x803281F4*/  lw      $t0, 0x002C($s1)
/*0x803281F8*/  li      $at, -0x1000
/*0x803281FC*/  sll     $t2, $t1, 2
/*0x80328200*/  addu    $t2, $t2, $t1
/*0x80328204*/  sll     $t2, $t2, 2
/*0x80328208*/  addu    $t3, $s0, $t2
/*0x8032820C*/  lw      $t4, 0x002C($t3)
/*0x80328210*/  ctc1    $t8, $31
/*0x80328214*/  and     $t5, $t4, $at
/*0x80328218*/  or      $t7, $t0, $t5
/*0x8032821C*/  b       .L80328240
/*0x80328220*/  sw      $t7, 0x002C($s1)
.L80328224:
/*0x80328224*/  lw      $t6, 0x0030($sp)
/*0x80328228*/  sll     $t8, $t6, 2
/*0x8032822C*/  addu    $t8, $t8, $t6
/*0x80328230*/  sll     $t8, $t8, 2
/*0x80328234*/  addu    $t9, $s0, $t8
/*0x80328238*/  lw      $t1, 0x002C($t9)
/*0x8032823C*/  sw      $t1, 0x002C($s1)
.L80328240:
/*0x80328240*/  lw      $t2, 0x001C($s0)
/*0x80328244*/  sw      $t2, 0x0038($sp)
/*0x80328248*/  lhu     $t3, 0x0000($s1)
/*0x8032824C*/  andi    $t4, $t3, 0x0020
/*0x80328250*/  beqz    $t4, .L8032825C
/*0x80328254*/  nop
/*0x80328258*/  sw      $0, 0x0038($sp)
.L8032825C:
/*0x8032825C*/  lhu     $t0, 0x0000($s1)
/*0x80328260*/  andi    $t5, $t0, 0x0040
/*0x80328264*/  beqz    $t5, .L8032827C
/*0x80328268*/  nop
/*0x8032826C*/  sw      $0, 0x002C($s1)
/*0x80328270*/  jal     osVirtualToPhysical
/*0x80328274*/  lw      $a0, 0x0004($s1)
/*0x80328278*/  sw      $v0, 0x003C($sp)
.L8032827C:
/*0x8032827C*/  lhu     $t7, 0x0000($s1)
/*0x80328280*/  andi    $t6, $t7, 0x0080
/*0x80328284*/  beqz    $t6, .L803282AC
/*0x80328288*/  nop
/*0x8032828C*/  lhu     $t8, 0x0028($s1)
/*0x80328290*/  li      $at, 0x03FF0000
/*0x80328294*/  lw      $a0, 0x0004($s1)
/*0x80328298*/  sll     $t9, $t8, 16
/*0x8032829C*/  and     $t1, $t9, $at
/*0x803282A0*/  jal     osVirtualToPhysical
/*0x803282A4*/  sw      $t1, 0x002C($s1)
/*0x803282A8*/  sw      $v0, 0x003C($sp)
.L803282AC:
/*0x803282AC*/  lw      $t2, 0x003C($sp)
/*0x803282B0*/  lui     $t3, %hi(0xA4400034)
/*0x803282B4*/  lui     $t0, %hi(0xA440002C)
/*0x803282B8*/  sw      $t2, %lo(0xA4400004)($t3)
/*0x803282BC*/  lw      $t4, 0x0008($s0)
/*0x803282C0*/  lui     $t7, %hi(0xA4400014)
/*0x803282C4*/  lui     $t8, %hi(0xA4400018)
/*0x803282C8*/  sw      $t4, %lo(0xA4400008)($t0)
/*0x803282CC*/  lw      $t5, 0x000C($s0)
/*0x803282D0*/  lui     $t1, %hi(0xA440001C)
/*0x803282D4*/  lui     $at, %hi(__osViNext)
/*0x803282D8*/  sw      $t5, %lo(0xA4400014)($t7)
/*0x803282DC*/  lw      $t6, 0x0010($s0)
/*0x803282E0*/  sw      $t6, %lo(0xA4400018)($t8)
/*0x803282E4*/  lw      $t9, 0x0014($s0)
/*0x803282E8*/  sw      $t9, %lo(0xA440001C)($t1)
/*0x803282EC*/  lw      $t2, 0x0018($s0)
/*0x803282F0*/  lui     $t9, %hi(0xA440000C)
/*0x803282F4*/  sw      $t2, %lo(0xA4400020)($t3)
/*0x803282F8*/  lw      $t4, 0x0038($sp)
/*0x803282FC*/  sw      $t4, %lo(0xA4400024)($t0)
/*0x80328300*/  lw      $t5, 0x0030($sp)
/*0x80328304*/  sll     $t7, $t5, 2
/*0x80328308*/  addu    $t7, $t7, $t5
/*0x8032830C*/  sll     $t7, $t7, 2
/*0x80328310*/  addu    $t6, $s0, $t7
/*0x80328314*/  lw      $t8, 0x0030($t6)
/*0x80328318*/  sw      $t8, %lo(0xA4400028)($t9)
/*0x8032831C*/  lw      $t1, 0x0030($sp)
/*0x80328320*/  sll     $t2, $t1, 2
/*0x80328324*/  addu    $t2, $t2, $t1
/*0x80328328*/  sll     $t2, $t2, 2
/*0x8032832C*/  addu    $t3, $s0, $t2
/*0x80328330*/  lw      $t4, %lo(0xA4400034)($t3)
/*0x80328334*/  lui     $t2, %hi(0xA4400030)
/*0x80328338*/  sw      $t4, %lo(0xA440002C)($t0)
/*0x8032833C*/  lw      $t5, 0x0030($sp)
/*0x80328340*/  lui     $t4, %hi(0xA4400034)
/*0x80328344*/  sll     $t7, $t5, 2
/*0x80328348*/  addu    $t7, $t7, $t5
/*0x8032834C*/  sll     $t7, $t7, 2
/*0x80328350*/  addu    $t6, $s0, $t7
/*0x80328354*/  lw      $t8, 0x0038($t6)
/*0x80328358*/  lui     $t5, %hi(0xA4400000)
/*0x8032835C*/  lui     $t7, %hi(__osViCurr)
/*0x80328360*/  sw      $t8, %lo(0xA440000C)($t9)
/*0x80328364*/  lw      $t1, 0x0020($s1)
/*0x80328368*/  lui     $t8, %hi(__osViCurr)
/*0x8032836C*/  lui     $t6, %hi(__osViNext)
/*0x80328370*/  sw      $t1, %lo(0xA4400030)($t2)
/*0x80328374*/  lw      $t3, 0x002C($s1)
/*0x80328378*/  sw      $t3, %lo(0xA4400034)($t4)
/*0x8032837C*/  lw      $t0, 0x000C($s1)
/*0x80328380*/  sw      $t0, %lo(0xA4400000)($t5)
/*0x80328384*/  lw      $t7, %lo(__osViCurr)($t7)
/*0x80328388*/  sw      $t7, %lo(__osViNext)($at)
/*0x8032838C*/  lui     $at, %hi(__osViCurr)
/*0x80328390*/  sw      $s1, %lo(__osViCurr)($at)
/*0x80328394*/  lw      $t8, %lo(__osViCurr)($t8)
/*0x80328398*/  lw      $t6, %lo(__osViNext)($t6)
/*0x8032839C*/  addiu   $t2, $t8, 0x0030
.L803283A0:
/*0x803283A0*/  lw      $at, 0x0000($t8)
/*0x803283A4*/  addiu   $t8, $t8, 0x000C
/*0x803283A8*/  addiu   $t6, $t6, 0x000C
/*0x803283AC*/  sw      $at, -0x000C($t6)
/*0x803283B0*/  lw      $at, -0x0008($t8)
/*0x803283B4*/  sw      $at, -0x0008($t6)
/*0x803283B8*/  lw      $at, -0x0004($t8)
/*0x803283BC*/  bne     $t8, $t2, .L803283A0
/*0x803283C0*/  sw      $at, -0x0004($t6)
/*0x803283C4*/  lw      $ra, 0x0024($sp)
/*0x803283C8*/  lw      $s0, 0x0018($sp)
/*0x803283CC*/  lw      $s1, 0x001C($sp)
/*0x803283D0*/  lw      $s2, 0x0020($sp)
/*0x803283D4*/  jr      $ra
/*0x803283D8*/  addiu   $sp, $sp, 0x0048
